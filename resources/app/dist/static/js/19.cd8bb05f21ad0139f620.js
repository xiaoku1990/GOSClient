webpackJsonp([19],{"F+2C":function(t,e){},QYGZ:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("fjIZ"),l=a("TgUw"),o=a("CaOM"),r={name:"hoursers",data:function(){return{userId:0,searchDialogVisible:!1,searchLoading:!1,searchFormData:{user_id:0,build_id:this.$BuildId,car_number:""},searchData:{car_id:0,car_number:"",car_type:""},whiteTableData:[],whiteTablePageTotal:1,whiteTableFormData:{user_id:0,build_id:this.$BuildId,list_type:"white",page:1},blackTableData:[],blackTablePageTotal:1,blackTableFormData:{user_id:0,build_id:this.$BuildId,list_type:"black",page:1},newDialogTitle:"",newDialogInfo:"",newLoading:!1,newblackWhiteDialogVisiable:!1,newFormData:{user_id:0,build_id:this.$BuildId,list_type:"",car_number:""},editDialogTitle:"",editLoading:!1,editDialogVisible:!1,editFormData:{user_id:0,build_id:this.$BuildId,list_type:"",car_id:0,car_number:""},deleteFormData:{user_id:0,build_id:this.$BuildId,list_type:"",car_number:"",car_id:""},blackExportLoading:!1,whiteExportLoading:!1,exportName:"",exportDateFormat:Object(o.a)().config.tableExportDateFormat,exportFiledArray:{sheetHeaderTitles:["编号","车牌号"],sheetHeaderFields:["car_id","car_number"]},exportFormData:{user_id:0,build_id:this.$BuildId,list_type:"",page:0}}},methods:{search:function(){var t=this;this.searchFormData.user_id=this.userId,this.searchLoading=!0,this.$http({method:"post",url:this.$Api+"/GOSSystem/queryBlackWhiteCar",params:this.searchFormData}).then(function(e){t.searchLoading=!1,1===e.data.result?(t.searchData=e.data,t.searchDialogVisible=!0):t.$notify({title:"查询结果",message:e.data.msg,duration:2e3,type:"info"})}).catch(function(e){t.searchLoading=!1,t.$notify({title:"ERROR",message:""+e,duration:2e3,type:"error"})})},whiteTableUpdate:function(){var t=this;this.whiteTableFormData.user_id=this.userId,this.$http({method:"post",url:this.$Api+"/GOSSystem/getBlackWhiteList",params:this.whiteTableFormData}).then(function(e){1===e.data.result&&(t.whiteTableData=e.data.white_list,t.whiteTablePageTotal=e.data.total_page)}).catch(function(e){t.$notify({title:"ERROR",message:""+e,duration:2e3,type:"error"})})},blackTableUpdate:function(){var t=this;this.blackTableFormData.user_id=this.userId,this.$http({method:"post",url:this.$Api+"/GOSSystem/getBlackWhiteList",params:this.blackTableFormData}).then(function(e){1===e.data.result&&(t.blackTableData=e.data.black_list,t.blackTablePageTotal=e.data.total_page)}).catch(function(e){t.$notify({title:"ERROR",message:""+e,duration:2e3,type:"error"})})},whiteTablePageChange:function(t){this.whiteTableUpdate()},blackTablePageChange:function(t){this.blackTableUpdate()},newblackWhiteDialog:function(t){"black"==t?(this.newDialogTitle="添加黑名单",this.newDialogInfo="黑名单车辆进入车位会报警提示"):"white"==t&&(this.newDialogTitle="添加白名单",this.newDialogInfo="白名单车辆查询机隐私保护不可查询到"),this.newFormData.user_id=this.userId,this.newFormData.list_type=t,this.newFormData.car_number="",this.newblackWhiteDialogVisiable=!0},newblackWhiteClick:function(){var t=this;this.newFormData.car_number?(this.newLoading=!0,this.$http({method:"post",url:this.$Api+"/GOSSystem/addCarToBlackWhiteList",params:this.newFormData}).then(function(e){t.newLoading=!1,1===e.data.result?(t.$notify({title:"成功",message:e.data.msg,duration:2e3,type:"success"}),t.newblackWhiteDialogVisiable=!1,"white"==t.newFormData.list_type?t.whiteTableUpdate():"black"==t.newFormData.list_type&&t.blackTableUpdate()):t.$notify({title:"添加失败",message:e.data.msg,duration:2e3,type:"error"})}).catch(function(e){t.newLoading=!1,t.$notify({title:"ERROR",message:""+e,duration:2e3,type:"error"})})):this.$message({title:"注意",message:"车配不能为空",duration:2e3,type:"warning"})},editDialog:function(t,e,a){a.cancelBubble=!0,"black"==t?this.editDialogTitle="编辑黑名单":"white"==t&&(this.editDialogTitle="编辑白名单"),this.editDialogVisible=!0,this.editFormData.user_id=this.userId,this.editFormData.car_id=e.car_id,this.editFormData.car_number=e.car_number,this.editFormData.list_type=t},editClick:function(){var t=this;this.editFormData.car_number?(this.editLoading=!0,this.$http({method:"post",url:this.$Api+"/GOSSystem/editCarInBlackWhiteList",params:this.editFormData}).then(function(e){t.editLoading=!1,1===e.data.result?(t.$notify({title:"成功",message:e.data.msg,duration:2e3,type:"success"}),t.editDialogVisible=!1,t.searchDialogVisible=!1,"white"==t.editFormData.list_type?t.whiteTableUpdate():"black"==t.editFormData.list_type&&t.blackTableUpdate()):t.$notify({title:"编辑失败",message:e.data.msg,duration:2e3,type:"error"})}).catch(function(e){t.editLoading=!1,t.$notify({title:"ERROR",message:""+e,duration:2e3,type:"error"})})):this.$message({message:"车牌号不能为空",duration:2e3,type:"warning"})},blackWhiteDelete:function(t,e,a){var i=this;a.cancelBubble=!0,this.$confirm("此操作将永久删除该名单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.deleteFormData.car_number=e.car_number,i.deleteFormData.car_id=e.car_id,i.deleteFormData.list_type=t,i.deleteFormData.user_id=i.userId,i.$http({method:"post",url:i.$Api+"/GOSSystem/deleteCarInBlackWhiteList",params:i.deleteFormData}).then(function(t){1===t.data.result?(i.$notify({type:"success",title:"成功",message:t.data.msg,duration:2e3}),i.searchDialogVisible=!1,"white"==i.deleteFormData.list_type?i.whiteTableUpdate():"black"==i.deleteFormData.list_type&&i.blackTableUpdate()):i.$notify({type:"error",title:"删除失败",message:t.data.msg,duration:2e3})}).catch(function(t){i.$notify({title:"ERROR",message:""+t,duration:2e3,type:"error"})})}).catch(function(){})},blackWhiteExport:function(t){var e=this;this.exportFormData.user_id=this.userId,this.exportFormData.list_type=t,"black"==t?(this.exportName="黑名单导出_",this.blackExportLoading=!0):"white"==t&&(this.exportName="白名单导出_",this.whiteExportLoading=!0),this.$http({method:"post",url:this.$Api+"/GOSSystem/getBlackWhiteList",params:this.exportFormData}).then(function(a){if(e.blackExportLoading=!1,e.whiteExportLoading=!1,200==a.status){var o=a.data;if(void 0!==o.result&&1==o.result){var r=[];"black"==t?r=o.black_list:"white"==t&&(r=o.white_list);var s=e.exportName+Object(i.a)(new Date,e.exportDateFormat);Object(l.a)(e,e.exportFiledArray.sheetHeaderTitles,e.exportFiledArray.sheetHeaderFields,r,s)}}else e.$message({message:"导出失败："+data.status,duration:2e3,type:"error"})}).catch(function(t){e.blackExportLoading=!1,e.whiteExportLoading=!1,e.$notify({title:"ERROR",message:""+t,duration:2e3,type:"error"})})}},mounted:function(){var t=this;localStorage.getItem("userInfo")?t.userId=JSON.parse(localStorage.getItem("userInfo")).user_id:console.log("[black-white]local storage 里面找不到登录信息userInfo"),eventbus.$on("onUserLogin",function(e){t.userId=e?e.user_id:0}),this.whiteTableUpdate(),this.blackTableUpdate()}},s={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",{staticClass:"black-nav"},[t._v("\n    车牌号  "),a("el-input",{staticClass:"input-round",staticStyle:{width:"200px","margin-right":"20px"},attrs:{placeholder:"请输入内容",size:"small",clearable:""},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.search(e):null}},model:{value:t.searchFormData.car_number,callback:function(e){t.$set(t.searchFormData,"car_number",e)},expression:"searchFormData.car_number"}}),t._v(" "),a("el-button",{attrs:{loading:t.searchLoading,type:"primary",size:"small",round:"",icon:"el-icon-search"},on:{click:t.search}})],1),t._v(" "),a("div",{staticClass:"main-padding par-state"},[a("div",{staticClass:"bark-row"},[a("div",{staticClass:"bark-one"},[a("p",{staticClass:"black-title"},[t._m(0),t._v(" "),a("el-button",{attrs:{round:"",icon:"el-icon-plus",size:"small"},on:{click:function(e){t.newblackWhiteDialog("white")}}},[t._v("新增记录")]),t._v(" "),a("el-button",{attrs:{round:"",icon:"el-icon-download",size:"small",type:"danger",loading:t.whiteExportLoading},on:{click:function(e){t.blackWhiteExport("white")}}},[t._v("批量导出")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.whiteTableData,height:"100%"}},[a("el-table-column",{attrs:{label:"编号",prop:"car_id",align:"center",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"car_number","empty-text":"暂无数据",label:"车牌号",align:"center",width:""}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",round:""},on:{click:function(a){t.editDialog("white",e.row,a)}}},[a("i",{staticClass:"black-i-bulr"}),t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",round:"",type:"info"},on:{click:function(a){t.blackWhiteDelete("white",e.row,a)}}},[a("i",{staticClass:"black-i-red"}),t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.whiteTableFormData.page,"page-count":t.whiteTablePageTotal,layout:"prev, pager, next, slot, jumper"},on:{"current-change":t.whiteTablePageChange,"update:currentPage":function(e){t.$set(t.whiteTableFormData,"page",e)}}},[a("span",{staticClass:"el-pagination__total page-count-padding"},[t._v("共"+t._s(t.whiteTablePageTotal)+"页")])])],1)],1),t._v(" "),a("div",{staticClass:"bark-one"},[a("p",{staticClass:"black-title"},[t._m(1),t._v(" "),a("el-button",{attrs:{round:"",icon:"el-icon-plus",size:"small"},on:{click:function(e){t.newblackWhiteDialog("black")}}},[t._v("新增记录")]),t._v(" "),a("el-button",{attrs:{round:"",icon:"el-icon-download",size:"small",type:"danger",loading:t.blackExportLoading},on:{click:function(e){t.blackWhiteExport("black")}}},[t._v("批量导出")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.blackTableData,height:"100%"}},[a("el-table-column",{attrs:{label:"编号",prop:"car_id",align:"center",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"car_number","empty-text":"暂无数据",label:"车牌号",align:"center",width:""}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",round:""},on:{click:function(a){t.editDialog("black",e.row,a)}}},[a("i",{staticClass:"black-i-bulr"}),t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",round:"",type:"info"},on:{click:function(a){t.blackWhiteDelete("black",e.row,a)}}},[a("i",{staticClass:"black-i-red"}),t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.blackTableFormData.page,"page-count":t.blackTablePageTotal,layout:"prev, pager, next, slot, jumper"},on:{"current-change":t.blackTablePageChange,"update:currentPage":function(e){t.$set(t.blackTableFormData,"page",e)}}},[a("span",{staticClass:"el-pagination__total page-count-padding"},[t._v("共"+t._s(t.blackTablePageTotal)+"页")])])],1)],1)])]),t._v(" "),a("el-dialog",{attrs:{title:"查询","append-to-body":!0,"lock-scroll":!0,modal:!0,"close-on-click-modal":!1,visible:t.searchDialogVisible,width:"30%",top:"35vh"},on:{"update:visible":function(e){t.searchDialogVisible=e}}},[a("el-form",{ref:"searchData",attrs:{model:t.searchData,"label-width":"60px"}},[a("el-col",{attrs:{span:24}},["black"==t.searchData.car_type?a("el-form-item",{attrs:{label:"黑名单"}}):t._e(),t._v(" "),"white"==t.searchData.car_type?a("el-form-item",{attrs:{label:"白名单"}}):t._e()],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"车牌号"}},[a("el-input",{attrs:{readonly:""},model:{value:t.searchData.car_number,callback:function(e){t.$set(t.searchData,"car_number",e)},expression:"searchData.car_number"}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:t.editLoading},on:{click:function(e){t.editDialog(t.searchData.car_type,t.searchData,e)}}},[t._v("编 辑")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.editLoading},on:{click:function(e){t.blackWhiteDelete(t.searchData.car_type,t.searchData,e)}}},[t._v("删 除")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.newDialogTitle,"append-to-body":!0,"lock-scroll":!0,modal:!0,"close-on-click-modal":!1,visible:t.newblackWhiteDialogVisiable,width:"30%",top:"35vh"},on:{"update:visible":function(e){t.newblackWhiteDialogVisiable=e}}},[a("p",{staticClass:"new-dialog-info"},[t._v("输入车牌：")]),t._v(" "),a("el-input",{attrs:{placeholder:t.newDialogInfo},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.newblackWhiteClick(e):null}},model:{value:t.newFormData.car_number,callback:function(e){t.$set(t.newFormData,"car_number",e)},expression:"newFormData.car_number"}}),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:function(e){t.newblackWhiteDialogVisiable=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{loading:t.newLoading,type:"primary",size:"small",round:""},on:{click:t.newblackWhiteClick}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.editDialogTitle,"append-to-body":!0,"lock-scroll":!0,modal:!0,"close-on-click-modal":!1,visible:t.editDialogVisible,width:"30%",top:"35vh"},on:{"update:visible":function(e){t.editDialogVisible=e}}},[a("el-form",{ref:"editFormData",attrs:{model:t.editFormData,"label-width":"60px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"车牌号"}},[a("el-input",{nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.editClick(e):null}},model:{value:t.editFormData.car_number,callback:function(e){t.$set(t.editFormData,"car_number",e)},expression:"editFormData.car_number"}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{right:"",type:"text"},on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.editLoading},on:{click:t.editClick}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i"),this._v("白名单")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i"),this._v("黑名单")])}]};var n=a("Z0/y")(r,s,!1,function(t){a("F+2C")},"data-v-3a0f40a7",null);e.default=n.exports}});
//# sourceMappingURL=19.cd8bb05f21ad0139f620.js.map