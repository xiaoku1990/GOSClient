webpackJsonp([13],{WOB7:function(t,e){},"ae/8":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("CaOM"),r={name:"information",data:function(){return{departmentList:[{department_name:"无",department_id:"0"}],departmentFormData:{user_id:Object(i.a)().config.userId,build_id:this.$BuildId},tableData:[],tablePageTotal:1,tableFormData:{user_id:Object(i.a)().config.userId,build_id:this.$BuildId,page:1},adding:!1,addDialogVisiable:!1,addFormData:{user_id:Object(i.a)().config.userId,build_id:this.$BuildId,add_department:{department_name:"",superior_departmentID:"0",superior_department:"",summary:""}},editing:!1,editDialogVisiable:!1,editFormData:{user_id:Object(i.a)().config.userId,build_id:this.$BuildId,edit_department:{department_id:"",department_name:"",superior_department:"",superior_departmentID:"",summary:""}},deleteFormData:{user_id:Object(i.a)().config.userId,build_id:this.$BuildId,delete_department:{department_id:"",department_name:""}}}},mounted:function(){this.departmentInfoLoad(),this.tableUpdate()},methods:{superiorDepartmentFormatter:function(t,e,a){return a||"无"},departmentInfoLoad:function(){var t=this;this.$http({method:"post",url:this.$Api+"/GOSSystem/getDepartmentInfoSpeedy",params:this.departmentFormData}).then(function(e){1===e.data.result&&(t.departmentList=t.departmentList.concat(e.data.department_list))}).catch(function(e){t.$notify({title:"ERROR",message:""+e,duration:2e3,type:"error"})})},tableUpdate:function(){var t=this;this.$http({method:"post",url:this.$Api+"/GOSSystem/getDepartmentInfo",params:this.tableFormData}).then(function(e){1===e.data.result&&(t.tableData=e.data.department_list,t.tablePageTotal=e.data.total_page)}).catch(function(e){t.$notify({title:"ERROR",message:""+e,duration:2e3,type:"error"})})},tablePageChange:function(t){this.tableUpdate()},addDialog:function(){this.addDialogVisiable=!0,this.addFormData.add_department={department_name:"",superior_departmentID:"0",superior_department:"",summary:""}},add:function(){var t=this;this.addFormData.add_department.department_name?(this.adding=!0,this.$http({method:"post",url:this.$Api+"/GOSSystem/addDepartmentInfo",params:this.addFormData}).then(function(e){t.adding=!1,1===e.data.result?(t.$notify({title:"成功",message:e.data.msg,duration:2e3,type:"success"}),t.addDialogVisiable=!1,t.departmentInfoLoad(),t.tableUpdate()):t.$notify({title:"添加失败",message:e.data.msg,duration:2e3,type:"error"})}).catch(function(e){t.adding=!1,t.$notify({title:"ERROR",message:""+e,duration:2e3,type:"error"})})):this.$message({title:"注意",message:"部门名称不能为空",duration:2e3,type:"warning"})},editDialog:function(t,e){e.cancelBubble=!0,this.editDialogVisiable=!0,this.editFormData.edit_department={department_id:t.department_id,department_name:t.department_name,superior_department:t.superior_department,superior_departmentID:t.superior_dpID,summary:t.summary}},edit:function(){var t=this;this.editFormData.edit_department.department_name?(this.editing=!0,this.$http({method:"post",url:this.$Api+"/GOSSystem/editDepartmentInfo",params:this.editFormData}).then(function(e){t.editing=!1,1===e.data.result?(t.editDialogVisiable=!1,t.$notify({title:"成功",message:e.data.msg,duration:2e3,type:"success"}),t.departmentInfoLoad(),t.tableUpdate()):t.$notify({title:"编辑失败",message:e.data.msg,duration:2e3,type:"error"})}).catch(function(e){t.editing=!1,t.$notify({title:"ERROR",message:""+e,duration:2e3,type:"error"})})):this.$message({message:"部门名称不能为空",duration:2e3,type:"warning"})},del:function(t,e){var a=this;e.cancelBubble=!0,this.$confirm("此操作将永久删除该部门, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.deleteFormData.delete_department={department_id:t.department_id,department_name:t.department_name},a.$http({method:"post",url:a.$Api+"/GOSSystem/deleteDepartmentInfo",params:a.deleteFormData}).then(function(t){1===t.data.result?(a.$notify({type:"success",title:"成功",message:t.data.msg,duration:2e3}),a.departmentInfoLoad(),a.tableUpdate()):a.$notify({type:"error",title:"删除失败",message:t.data.msg,duration:2e3})}).catch(function(t){a.$notify({title:"ERROR",message:""+t,duration:2e3,type:"error"})})}).catch(function(){})}}},n={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"main-padding stor-var"},[a("div",{staticClass:"auth-row"},[a("p",{staticClass:"back-title"},[t._m(0),t._v(" "),a("el-button",{attrs:{round:"",icon:"el-icon-plus",size:"small"},on:{click:t.addDialog}},[t._v("新增记录")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"100%"}},[a("el-table-column",{attrs:{prop:"department_id",label:"编号",align:"center",width:""}}),t._v(" "),a("el-table-column",{attrs:{prop:"department_name",label:"部门",align:"center",width:""}}),t._v(" "),a("el-table-column",{attrs:{formatter:t.superiorDepartmentFormatter,prop:"superior_department",label:"上级部门",align:"center",width:""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"180px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",round:""},on:{click:function(a){t.editDialog(e.row,a)}}},[a("i",{staticClass:"back-i-bulr"}),t._v("编辑")]),t._v(" "),a("el-button",{attrs:{size:"mini",round:""},on:{click:function(a){t.del(e.row,a)}}},[a("i",{staticClass:"back-i-red"}),t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.tableFormData.page,"page-count":t.tablePageTotal,layout:"prev, pager, next, slot, jumper"},on:{"current-change":t.tablePageChange,"update:currentPage":function(e){t.$set(t.tableFormData,"page",e)}}},[a("span",{staticClass:"el-pagination__total page-count-padding"},[t._v("共"+t._s(t.tablePageTotal)+"页")])])],1)],1)]),t._v(" "),a("el-dialog",{attrs:{title:"新增部门信息","append-to-body":!0,"lock-scroll":!0,modal:!0,"close-on-click-modal":!1,visible:t.addDialogVisiable,width:"30%",top:"30vh"},on:{"update:visible":function(e){t.addDialogVisiable=e}}},[a("el-form",{ref:"addFormData",attrs:{model:t.addFormData,"label-width":"80px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"上级部门"}},[a("el-select",{model:{value:t.addFormData.add_department.superior_departmentID,callback:function(e){t.$set(t.addFormData.add_department,"superior_departmentID",e)},expression:"addFormData.add_department.superior_departmentID"}},t._l(t.departmentList,function(t){return a("el-option",{attrs:{label:t.department_name,value:t.department_id}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"部门名称"}},[a("el-input",{model:{value:t.addFormData.add_department.department_name,callback:function(e){t.$set(t.addFormData.add_department,"department_name",e)},expression:"addFormData.add_department.department_name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"部门描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.addFormData.add_department.summary,callback:function(e){t.$set(t.addFormData.add_department,"summary",e)},expression:"addFormData.add_department.summary"}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addDialogVisiable=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.adding,size:"small",round:""},on:{click:t.add}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑","append-to-body":!0,"lock-scroll":!0,modal:!0,"close-on-click-modal":!1,visible:t.editDialogVisiable,width:"30%"},on:{"update:visible":function(e){t.editDialogVisiable=e}}},[a("el-form",{ref:"editFormData",attrs:{model:t.editFormData,"label-width":"80px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"上级部门"}},[a("el-select",{model:{value:t.editFormData.edit_department.superior_departmentID,callback:function(e){t.$set(t.editFormData.edit_department,"superior_departmentID",e)},expression:"editFormData.edit_department.superior_departmentID"}},t._l(t.departmentList,function(t){return a("el-option",{attrs:{label:t.department_name,value:t.department_id}})}))],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"部门名称"}},[a("el-input",{model:{value:t.editFormData.edit_department.department_name,callback:function(e){t.$set(t.editFormData.edit_department,"department_name",e)},expression:"editFormData.edit_department.department_name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"部门描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.editFormData.edit_department.summary,callback:function(e){t.$set(t.editFormData.edit_department,"summary",e)},expression:"editFormData.edit_department.summary"}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{right:""},on:{click:function(e){t.editDialogVisiable=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.editing},on:{click:t.edit}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i"),this._v("部门列表")])}]};var d=a("Z0/y")(r,n,!1,function(t){a("WOB7")},"data-v-c0b78426",null);e.default=d.exports}});
//# sourceMappingURL=13.8e9ac99770a96719841b.js.map