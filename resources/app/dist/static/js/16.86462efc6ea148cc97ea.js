webpackJsonp([16],{eo1x:function(e,t){},sLMg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("CaOM"),i={name:"personnel",data:function(){return{roleList:[{role_name:"无",role_id:0}],roleFormData:{user_id:Object(r.a)().config.userId,build_id:this.$BuildId},departmentList:[{department_name:"无",department_id:"0"}],departmentFormData:{user_id:Object(r.a)().config.userId,build_id:this.$BuildId},tableData:[],tablePageTotal:1,tableFormData:{user_id:Object(r.a)().config.userId,build_id:this.$BuildId,page:1},adding:!1,addDialogVisiable:!1,addFormData:{user_id:Object(r.a)().config.userId,build_id:this.$BuildId,add_user:{user_name:"",nick_name:"",user_departmentName:"",user_departmentID:"0",user_pwd:"",user_state:"1",user_tel:"",user_email:"",summary:""}},editing:!1,editDialogVisible:!1,editFormData:{user_id:Object(r.a)().config.userId,build_id:this.$BuildId,edit_user:{user_id:"",user_name:"",user_departmentName:"",user_departmentID:"",user_state:"",user_tel:"",user_email:"",summary:""}},roleEditing:!1,roleEditDialogVisiable:!1,roleEditFormData:{user_id:Object(r.a)().config.userId,build_id:this.$BuildId,edit_userRole:{user_id:"",user_roleName:"",user_roleID:"",user_authorize:""}},deleteFormData:{user_id:Object(r.a)().config.userId,build_id:this.$BuildId,delete_user:{user_id:"",user_name:""}}}},mounted:function(){this.roleInfoLoad(),this.departmentInfoLoad(),this.tableUpdate()},methods:{roleFormatter:function(e,t,a){return a||"无"},departmentFormatter:function(e,t,a){return a||"无"},roleInfoLoad:function(){var e=this;this.$http({method:"post",url:this.$Api+"/GOSSystem/getRoleInfoSpeedy",params:this.roleEditFormData}).then(function(t){1===t.data.result&&(e.roleList=e.roleList.concat(t.data.role_list))}).catch(function(t){e.$notify({title:"ERROR",message:""+t,duration:2e3,type:"error"})})},departmentInfoLoad:function(){var e=this;this.$http({method:"post",url:this.$Api+"/GOSSystem/getDepartmentInfoSpeedy",params:this.departmentFormData}).then(function(t){1===t.data.result&&(e.departmentList=e.departmentList.concat(t.data.department_list))}).catch(function(t){e.$notify({title:"ERROR",message:""+t,duration:2e3,type:"error"})})},tableUpdate:function(){var e=this;this.$http({method:"post",url:this.$Api+"/GOSSystem/getUserInfo",params:this.tableFormData}).then(function(t){1===t.data.result&&(e.tableData=t.data.user_list,e.tablePageTotal=t.data.total_page)}).catch(function(t){e.$notify({title:"ERROR",message:""+t,duration:2e3,type:"error"})})},tablePageChange:function(e){this.tableUpdate()},addDialog:function(){this.addDialogVisiable=!0,this.addFormData.add_user={user_name:"",nick_name:"",user_departmentName:"",user_departmentID:"0",user_pwd:"",user_state:"1",user_tel:"",user_email:"",summary:""}},add:function(){var e=this;this.addFormData.add_user.nick_name?this.addFormData.add_user.user_pwd?(this.adding=!0,this.$http({method:"post",url:this.$Api+"/GOSSystem/addUserInfo",params:this.addFormData}).then(function(t){e.adding=!1,1===t.data.result?(e.$notify({title:"成功",message:t.data.msg,duration:2e3,type:"success"}),e.addDialogVisiable=!1,e.tableUpdate()):e.$notify({title:"添加失败",message:t.data.msg,duration:2e3,type:"error"})}).catch(function(t){e.adding=!1,e.$notify({title:"ERROR",message:""+t,duration:2e3,type:"error"})})):this.$message({title:"注意",message:"密码不能为空",duration:2e3,type:"warning"}):this.$message({title:"注意",message:"登录名称不能为空",duration:2e3,type:"warning"})},editDialog:function(e,t){t.cancelBubble=!0,this.editDialogVisible=!0,this.editFormData.edit_user={user_id:e.user_id,user_name:e.user_name,user_departmentName:e.user_departmentName,user_departmentID:e.user_departmentID,user_state:e.user_state,user_tel:e.user_tel,user_email:e.user_email,summary:e.summary}},edit:function(){var e=this;this.editing=!0,this.$http({method:"post",url:this.$Api+"/GOSSystem/editUserInfo",params:this.editFormData}).then(function(t){e.editing=!1,1===t.data.result?(e.editing=!1,e.editDialogVisible=!1,e.$notify({title:"成功",message:t.data.msg,duration:2e3,type:"success"}),e.tableUpdate()):e.$notify({title:"编辑失败",message:t.data.msg,duration:2e3,type:"error"})}).catch(function(t){e.editing=!1,e.$notify({title:"ERROR",message:""+t,duration:2e3,type:"error"})})},roleEditDialog:function(e,t){t.cancelBubble=!0,this.roleEditDialogVisiable=!0,this.roleEditFormData.edit_userRole={user_id:e.user_id,user_roleName:e.user_roleName,user_roleID:e.user_roleID,user_authorize:1}},roleEdit:function(){var e=this;this.roleEditing=!0,this.$http({method:"post",url:this.$Api+"/GOSSystem/editUserRole",params:this.roleEditFormData}).then(function(t){e.roleEditing=!1,1===t.data.result?(e.roleEditing=!1,e.$notify({title:"成功",message:t.data.msg,duration:2e3,type:"success"}),e.roleEditDialogVisiable=!1,e.tableUpdate()):e.$notify({title:"分配权限失败",message:t.data.msg,duration:2e3,type:"error"})}).catch(function(t){e.roleEditing=!1,e.$notify({title:"ERROR",message:""+t,duration:2e3,type:"error"})})},del:function(e,t){var a=this;t.cancelBubble=!0,this.$confirm("此操作将永久删除该用户, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.deleteFormData.delete_user={user_id:e.user_id,user_name:e.user_name},a.$http({method:"post",url:a.$Api+"/GOSSystem/deleteUserInfo",params:a.deleteFormData}).then(function(e){1===e.data.result?(a.$notify({type:"success",title:"成功",message:e.data.msg,duration:2e3}),a.tableUpdate()):a.$notify({type:"error",title:"删除失败",message:e.data.msg,duration:2e3})}).catch(function(e){a.$notify({title:"ERROR",message:""+e,duration:2e3,type:"error"})})}).catch(function(){})}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[a("div",{staticClass:"main-padding stor-var"},[a("div",{staticClass:"auth-row"},[a("p",{staticClass:"back-title"},[e._m(0),e._v(" "),a("el-button",{attrs:{round:"",icon:"el-icon-plus",size:"small"},on:{click:e.addDialog}},[e._v("新增记录")])],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,height:"100%"}},[a("el-table-column",{attrs:{label:"编号",prop:"user_id",align:"center",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"user_name",label:"姓名",align:"center",width:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"nick_name",label:"登录账号",align:"center",width:""}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.departmentFormatter,prop:"user_departmentName",label:"所属部门",align:"center",width:""}}),e._v(" "),a("el-table-column",{attrs:{formatter:e.roleFormatter,prop:"user_roleName",label:"人员角色",align:"center",width:""}}),e._v(" "),a("el-table-column",{attrs:{label:"人员状态",align:"center",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.user_state?a("span",[e._v("启用")]):0==t.row.user_state?a("span",{staticStyle:{color:"red"}},[e._v("禁用")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"授权状态",align:"center",width:""},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.user_authorize?a("span",[e._v("已授权")]):0==t.row.user_authorize?a("span",{staticStyle:{color:"red"}},[e._v("未授权")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作",width:"280px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",round:""},on:{click:function(a){e.editDialog(t.row,a)}}},[a("i",{staticClass:"back-i-bulr"}),e._v("编辑\n              ")]),e._v(" "),a("el-button",{attrs:{size:"mini",round:""},on:{click:function(a){e.roleEditDialog(t.row,a)}}},[a("i",{staticClass:"back-i-yellow"}),e._v("授权\n              ")]),e._v(" "),a("el-button",{attrs:{size:"mini",round:"",type:"info"},on:{click:function(a){e.del(t.row,a)}}},[a("i",{staticClass:"back-i-red"}),e._v("删除\n              ")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.tableFormData.page,"page-count":e.tablePageTotal,layout:"prev, pager, next, slot, jumper"},on:{"current-change":e.tablePageChange,"update:currentPage":function(t){e.$set(e.tableFormData,"page",t)}}},[a("span",{staticClass:"el-pagination__total page-count-padding"},[e._v("共"+e._s(e.tablePageTotal)+"页")])])],1)],1)])]),e._v(" "),a("el-dialog",{attrs:{title:"新增人员信息","append-to-body":!0,"lock-scroll":!0,modal:!0,"close-on-click-modal":!1,visible:e.addDialogVisiable,width:"30%",top:"10vh"},on:{"update:visible":function(t){e.addDialogVisiable=t}}},[a("el-form",{ref:"addFormData",attrs:{model:e.addFormData,"label-width":"80px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:e.addFormData.add_user.user_name,callback:function(t){e.$set(e.addFormData.add_user,"user_name",t)},expression:"addFormData.add_user.user_name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"所属部门"}},[a("el-select",{model:{value:e.addFormData.add_user.user_departmentID,callback:function(t){e.$set(e.addFormData.add_user,"user_departmentID",t)},expression:"addFormData.add_user.user_departmentID"}},e._l(e.departmentList,function(e){return a("el-option",{attrs:{label:e.department_name,value:e.department_id}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"登录名"}},[a("el-input",{model:{value:e.addFormData.add_user.nick_name,callback:function(t){e.$set(e.addFormData.add_user,"nick_name",t)},expression:"addFormData.add_user.nick_name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"登录密码"}},[a("el-input",{model:{value:e.addFormData.add_user.user_pwd,callback:function(t){e.$set(e.addFormData.add_user,"user_pwd",t)},expression:"addFormData.add_user.user_pwd"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{model:{value:e.addFormData.add_user.user_tel,callback:function(t){e.$set(e.addFormData.add_user,"user_tel",t)},expression:"addFormData.add_user.user_tel"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{model:{value:e.addFormData.add_user.user_email,callback:function(t){e.$set(e.addFormData.add_user,"user_email",t)},expression:"addFormData.add_user.user_email"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.addFormData.add_user.summary,callback:function(t){e.$set(e.addFormData.add_user,"summary",t)},expression:"addFormData.add_user.summary"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"人员状态"}},[a("el-radio-group",{model:{value:e.addFormData.add_user.user_state,callback:function(t){e.$set(e.addFormData.add_user,"user_state",t)},expression:"addFormData.add_user.user_state"}},[a("el-radio",{attrs:{label:"1"}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:"0"}},[e._v("禁用")])],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"text"},on:{click:function(t){e.addDialogVisiable=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.adding,size:"small",round:""},on:{click:e.add}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"人员编辑","append-to-body":!0,"lock-scroll":!0,modal:!0,"close-on-click-modal":!1,visible:e.editDialogVisible,width:"50%"},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("el-form",{ref:"editFormData",attrs:{model:e.editFormData,"label-width":"80px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:e.editFormData.edit_user.user_name,callback:function(t){e.$set(e.editFormData.edit_user,"user_name",t)},expression:"editFormData.edit_user.user_name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"所属部门"}},[a("el-select",{model:{value:e.editFormData.edit_user.user_departmentID,callback:function(t){e.$set(e.editFormData.edit_user,"user_departmentID",t)},expression:"editFormData.edit_user.user_departmentID"}},e._l(e.departmentList,function(e){return a("el-option",{attrs:{label:e.department_name,value:e.department_id}})}))],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"电话"}},[a("el-input",{model:{value:e.editFormData.edit_user.user_tel,callback:function(t){e.$set(e.editFormData.edit_user,"user_tel",t)},expression:"editFormData.edit_user.user_tel"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"邮箱"}},[a("el-input",{model:{value:e.editFormData.edit_user.user_email,callback:function(t){e.$set(e.editFormData.edit_user,"user_email",t)},expression:"editFormData.edit_user.user_email"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"描述"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.editFormData.edit_user.summary,callback:function(t){e.$set(e.editFormData.edit_user,"summary",t)},expression:"editFormData.edit_user.summary"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"人员状态"}},[a("el-radio-group",{model:{value:e.editFormData.edit_user.user_state,callback:function(t){e.$set(e.editFormData.edit_user,"user_state",t)},expression:"editFormData.edit_user.user_state"}},[a("el-radio",{attrs:{label:1}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("禁用")])],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{right:"",type:"text"},on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.editing},on:{click:e.edit}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"分配权限","append-to-body":!0,"lock-scroll":!0,modal:!0,"close-on-click-modal":!1,visible:e.roleEditDialogVisiable,width:"30%"},on:{"update:visible":function(t){e.roleEditDialogVisiable=t}}},[a("el-select",{attrs:{label:"角色"},model:{value:e.roleEditFormData.edit_userRole.user_roleID,callback:function(t){e.$set(e.roleEditFormData.edit_userRole,"user_roleID",t)},expression:"roleEditFormData.edit_userRole.user_roleID"}},e._l(e.roleList,function(e){return a("el-option",{attrs:{label:e.role_name,value:e.role_id}})})),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{right:"",type:"text"},on:{click:function(t){e.roleEditDialogVisiable=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",loading:e.roleEditing},on:{click:e.roleEdit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("i"),this._v("人员管理与授权")])}]};var l=a("Z0/y")(i,s,!1,function(e){a("eo1x")},"data-v-4dd70c03",null);t.default=l.exports}});
//# sourceMappingURL=16.86462efc6ea148cc97ea.js.map